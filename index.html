<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <title>당신에게게</title>
    <meta name="description" content="살아야 하는 이유를 잃어버렸나요? 왜 살아야 하는지 모르겠을 때, 이 곳에서 삶의 의미를 찾아보세요. 당신의 감정과 고민에 맞는 단 하나의 지혜로운 문장이 당신을 기다립니다.">
    <meta name="keywords" content="삶의 의미, 왜 살아야 할까, 살아야 하는 이유, 무기력증, 공허함, 번아웃, 번아웃 증후군, 우울증, 불안, 왜 살아야 하는지 모르겠을 때, 명언">
    <link rel="canonical" href="https://yeji.site">

    <link rel="alternate" hreflang="ko" href="https://yeji.site/index.html">
    <link rel="alternate" hreflang="en" href="https://yeji.site/index.en.html">
    <link rel="alternate" hreflang="x-default" href="https://yeji.site/index.html">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yeji.site">
    <meta property="og:title" content="당신에게게">
    <meta property="og:description" content="지금 당신의 마음을 안아줄 지혜를 찾아보세요.">
    <meta property="og:image" content="preview.png">
    <meta property="og:site_name" content="마음지혜 가차">
    <meta property="og:locale" content="ko_KR">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="당신에게게">
    <meta name="twitter:description" content="공허함과 무기력함 속에 있는 당신을 위한 한 문장의 위로.">
    <meta name="twitter:image" content="preview.png">

    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fca311' d='M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z'/%3E%3C/svg%3E">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23fca311' d='M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z'/%3E%3C/svg%3E">
    <meta name="theme-color" content="#ffffff">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "url": "https://yeji.site/",
      "name": "마음지혜 가차",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://yeji.site/",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "당신에게",
      "description": "살아야 하는 이유를 잃었을 때, 삶의 의미를 찾는 데 도움이 되는 지혜의 문장을 제공하는 서비스입니다.",
      "mainEntity": {
        "@type": "HowTo",
        "name": "내 마음을 위한 지혜의 문장 찾기",
        "description": "세 단계를 통해 현재 감정을 진단하고 '살아야 하는 이유'에 대한 답을 얻게 도와줄 맞춤형 위로의 문장을 받습니다.",
        "step": [
          {
            "@type": "HowToStep",
            "name": "감정 선택",
            "text": "현재 당신의 마음에 가장 가까운 감정(공허함, 무기력함 등)을 선택하여 '왜 살아야 하는지'에 대한 고민의 첫 단추를 풉니다."
          },
          {
            "@type": "HowToStep",
            "name": "원인 파악",
            "text": "그 감정이 어디에서 오는지(인간관계, 진로 등)를 고민해보며 삶의 의미를 찾는 과정을 시작합니다."
          },
          {
            "@type": "HowToStep",
            "name": "지혜 획득",
            "text": "당신에게 필요한 위로의 방식을 선택하고 단 하나의 지혜 문장을 통해 '살아야 하는 이유'에 대한 작은 실마리를 얻습니다."
          }
        ]
      }
    }
    </script>

    <link rel="preload" as="style" href="style.css">
    <link rel="stylesheet" href="style.css">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-19H951BS8X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-19H951BS8X');
    </script>

</head>
<body>
    <h1 style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0;">
        살아야 하는 이유와 삶의 의미를 찾는 당신을 위한 마음 위로 서비스
    </h1>
    <div class="app-container">
        <div class="language-switcher">
            <button class="lang-btn" data-lang="ko">한국어</button>
            <button class="lang-btn" data-lang="en">English</button>
        </div>
        <main class="gacha-container">
            <!-- <h2 class="title">삶의 의미를 잃어버린 당신에게</h2> -->
            <!-- <p class="tagline">당신만을 위한, 지친 마음을 위한 한 문장의 지혜</p> -->
            <!-- 3-Step Question UI -->
            <div class="question-container">
                <div id="question-1" class="question-step">
                    <h2 class="question-title" data-key="q1Title">지금 당신의 마음에 가장 가까운 감정은 무엇인가요?</h2>
                    <div class="options-grid">
                        <button class="option-btn" data-key="empty" data-value="공허함">공허함</button>
                        <button class="option-btn" data-key="powerless" data-value="무기력함">무기력함</button>
                        <button class="option-btn" data-key="anxious" data-value="불안함">불안함</button>
                        <button class="option-btn" data-key="sadness" data-value="슬픔">슬픔</button>
                    </div>
                </div>

                <div id="question-2" class="question-step hidden">
                    <h2 class="question-title" data-key="q2Title">그 감정의 원인은 무엇이라고 생각하시나요?</h2>
                    <div class="options-grid">
                        <button class="option-btn" data-key="workCareer" data-value="일과 진로">일과 진로</button>
                        <button class="option-btn" data-key="relationships" data-value="인간관계">인간관계</button>
                        <button class="option-btn" data-key="health" data-value="건강">건강</button>
                        <button class="option-btn" data-key="unknown" data-value="알 수 없음">알 수 없음</button>
                    </div>
                </div>

                <div id="question-3" class="question-step hidden">
                    <h2 class="question-title" data-key="q3Title">지금 당신에게 가장 필요한 위로의 종류는 무엇인가요?</h2>
                    <div class="options-grid">
                        <button class="option-btn" data-key="gentleComfort" data-value="다정한">다정한 위로</button>
                        <button class="option-btn" data-key="realisticAdvice" data-value="현실적인">현실적인 조언</button>
                        <button class="option-btn" data-key="philosophicalInsight" data-value="철학적인">철학적인 통찰</button>
                        <button class="option-btn" data-key="sternAdvice" data-value="따끔한">따끔한 충고</button>
                    </div>
                    <button id="submit-btn" class="next-btn hidden" data-key="findWisdom">지혜 찾기</button>
                </div>
            </div>
            
            <div id="loading-spinner" class="hidden">
                <div class="spinner"></div>
                <p data-key="loadingMessage">당신만을 위한 지혜를 찾고 있어요...</p>
            </div>

            <!-- Satisfaction Survey after closing ticket -->
            <div class="satisfaction-survey hidden">
                <p class="survey-question" data-key="surveyQuestion"></p>
                <div class="survey-buttons">
                    <button class="survey-btn" id="survey-yes" data-key="surveyYesText"></button>
                    <button class="survey-btn" id="survey-no" data-key="surveyNoText"></button>
                </div>
            </div>
        </main>

        <!-- Result Ticket will be shown here -->
        <div class="result-overlay">
            <div class="result-ticket">
                <div class="ticket-header">                    
                    <button class="close-btn" aria-label="닫기">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18" stroke="#F5F5F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 6L18 18" stroke="#F5F5F5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            
                        </svg>
                    </button>
                </div>
                <div class="ticket-content">
                    <p class="wisdom-intro"></p>
                    <p class="wisdom-text-main"></p>
                    <p class="wisdom-author-main"></p>
                    <p class="wisdom-commentary-main"></p>
                    <p class="wisdom-closing"></p>
                    <p class="mission-text-main"></p>
                    <p class="key-message" data-key="keyMessage"></p>

                </div>
                <div class="ticket-actions">  
                    <button id="report-btn" data-key="getReport">맞춤형 리포트 받기</button>
                    <button id="naver-map-link" class="map-btn" onclick="window.open(this.dataset.href, '_blank')" data-href="https://map.naver.com/v5/search/%EC%8B%AC%EB%A6%AC%EC%83%81%EB%8B%B4%EC%84%BC%ED%84%B0">
                        <span data-key="findExpertsNaverMap">내 주변 전문가 찾기</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Particle effects container -->
        <div class="particles"></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="main.js"></script>

    <script>
    (function(){
      const mapContainer = document.getElementById('naver-map-link-container');
      const mapLink = document.getElementById('naver-map-link');
      const msg1 = mapContainer ? mapContainer.querySelector('[data-key="naverMapLinkMessage"]') : null;
      const msg2 = mapContainer ? mapContainer.querySelector('[data-key="naverMapLinkMessage2"]') : null;

      const EMOTION_TO_QUERY = {
        empty: '심리상담센터',
        powerless: '번아웃 상담',
        anxious: '정신건강의학과',
        sadness: '우울증 상담'
      };

      // main.js에서 결과를 렌더한 직후에 호출하세요.
      // 예: window.showNaverMapLink('empty');
      window.showNaverMapLink = function(emotionKey){
        try {
          const query = EMOTION_TO_QUERY[emotionKey] || '심리상담센터';
          const encoded = encodeURIComponent(query);
          if (mapLink) mapLink.dataset.href = 'https://map.naver.com/v5/search/' + encoded;
          if (msg1) msg1.textContent = '선택하신 감정에 맞는 전문가를 찾아보실 수 있어요.';
          if (msg2) msg2.textContent = '네이버 지도에서 검색 결과를 확인해보세요. (새 탭에서 열림)';
          if (mapContainer) mapContainer.style.display = 'block';
        } catch (e) {
          // 실패해도 페이지 동작에는 영향 없음
          if (mapContainer) mapContainer.style.display = 'none';
        }
      };
    })();
    </script>

    <script>
    (function(){
      function showToast(text, duration = 3500) {
        if (!text) return;
        const id = 'custom-toast';
        if (document.getElementById(id)) return;
        const toast = document.createElement('div');
        toast.id = id;
        toast.textContent = text;
        Object.assign(toast.style, {
          position: 'fixed',
          left: '50%',
          bottom: '10%',
          transform: 'translateX(-50%) scale(0.9)',
          background: 'rgba(0,0,0,0.85)',
          color: '#fff',
          padding: '12px 20px',
          borderRadius: '25px',
          boxShadow: '0 6px 18px rgba(0,0,0,0.25)',
          zIndex: 9999,
          opacity: '0',
          transition: 'opacity 250ms ease, transform 250ms ease'
        });
        document.body.appendChild(toast);
        
        requestAnimationFrame(() => {
          toast.style.opacity = '1';
          toast.style.transform = 'translateX(-50%) scale(1)';
        });

        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translateX(-50%) scale(0.9)';
          toast.addEventListener('transitionend', () => toast.remove());
        }, duration);
      }

      // Make showToast global so main.js can use it
      window.showToast = showToast;

      const closeBtn = document.querySelector('.result-overlay .close-btn');
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          const overlay = document.querySelector('.result-overlay');
          if (overlay) overlay.style.display = 'none';
          // Show satisfaction survey in gacha-container
          const survey = document.querySelector('.satisfaction-survey');
          if (survey) survey.classList.remove('hidden');
        });
      }

      const overlay = document.querySelector('.result-overlay');
      const ticket = document.querySelector('.result-ticket');

      // Close on overlay click and show survey
      overlay.addEventListener('click', () => {
        overlay.style.display = 'none';
        // Show satisfaction survey in gacha-container
        const survey = document.querySelector('.satisfaction-survey');
        if (survey) survey.classList.remove('hidden');
      });

      // Prevent closing when clicking on the ticket itself
      ticket.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    })();
    </script>
</body>
</html>